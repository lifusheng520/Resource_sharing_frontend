webpackJsonp([16],{O6WN:function(e,t){},lyv1:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={name:"DeletedResourceManager",data:function(){return{deletedPageData:{currentPage:-1,pageSize:10,total:-1,user_id:""},deletedTableData:[],checkAll:!1,deletedSelect:[]}},created:function(){this.getLoginUserInfo(),this.getDeletedRecordList()},methods:{getLoginUserInfo:function(){var e=this.$cookies.get("user_id");e?this.deletedPageData.user_id=e:(this.$message.info(this.$t("sessionExpired")),this.$router.push("/login"))},getDeletedRecordList:function(){var e=this;this.$axios.post("/resource/getDeleted",this.deletedPageData).then(function(t){var s=t.data;4028==s.code?(e.deletedPageData.total=s.data.total,e.deletedPageData.currentPage=s.data.currentPage,e.deletedPageData.pageSize=s.data.pageSize,e.deletedTableData=s.data.pageList):e.$message.error(s.code+" ~~~~ "+e.$t("sessionExpired"))})},handleSizeChange:function(e){this.deletedPageData.pageSize=e,this.getDeletedRecordList()},handleCurrentChange:function(e){this.deletedPageData.currentPage=e,this.getDeletedRecordList()},getTimePass:function(e){var t=(new Date).getTime(),s=void 0,a=parseInt((t-e)/1e3);a<60&&(s=this.$t("withinOneMinute")),a=parseInt(a/60),!s&&a<60&&(s=a+this.$t("minutesAgo"));var i=parseInt(a/60),n=a%60;!s&&i<24&&(s=i+this.$t("hour")+n+this.$t("minutesAgo"));var l=parseInt(i/24);return i%=24,s||(s=l+this.$t("day")+i+this.$t("hoursAgo")),s},handleCheckAllChange:function(){if(this.deletedSelect=[],this.checkAll)this.checkAll&&(this.checkAll=!1);else{for(var e=0;e<this.deletedTableData.length;++e)this.deletedSelect.push(this.deletedTableData[e]);this.deletedSelect.push(void 0),this.checkAll=!0}},deleteResourceBinRecord:function(){if(this.updateSelectList(),0!==this.deletedSelect.length){var e=this;this.$axios.post("/resource/realDelete",this.deletedSelect).then(function(t){var s=t.data;4029==s.code?(e.$message({message:s.code+"~~~~  "+e.$t("operationSuccess"),type:"success",center:!0,duration:2e3}),e.getDeletedRecordList()):e.$message({message:s.code+"~~~~  "+e.$t("serverError"),type:"error",center:!0,duration:2e3})}),this.deletedSelect=[]}else this.handleCheckAllChange()},updateSelectList:function(){for(var e=-1,t=0;t<this.deletedSelect.length;++t)if(!this.deletedSelect[t]){e=t;break}return-1!=e&&(this.deletedSelect.splice(e,1),!0)},reinstateResource:function(){if(this.updateSelectList(),0!==this.deletedSelect.length){var e=this;this.$axios.post("/resource/reinstate",this.deletedSelect).then(function(t){var s=t.data;4031==s.code?e.getDeletedRecordList():e.$message({message:s.code+"~~~~  "+e.$t("serverError"),type:"error",center:!0,duration:2e3})}),this.deletedSelect=[]}else this.handleCheckAllChange()},translateDisciplineToSelectedLanguage:function(e){switch(e){case"全部":return this.$t("recommendationContent.all");case"法学":return this.$t("disciplines.law");case"工学":return this.$t("disciplines.engineering");case"管理学":return this.$t("disciplines.management");case"计算机科学":return this.$t("disciplines.computerScience");case"教育学":return this.$t("disciplines.education");case"经济学":return this.$t("disciplines.economics");case"军事学":return this.$t("disciplines.militaryScience");case"理学":return this.$t("disciplines.science");case"历史学":return this.$t("disciplines.history");case"农学":return this.$t("disciplines.agronomy");case"文学":return this.$t("disciplines.literature");case"医学":return this.$t("disciplines.medicine");case"艺术学":return this.$t("disciplines.artStudies");case"哲学":return this.$t("disciplines.philosophy")}}}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{width:"100%"}},[s("div",{staticClass:"transaction",staticStyle:{"padding-top":"20px"}},[s("div",{staticStyle:{width:"90%",margin:"0px auto"}},[s("div",{staticClass:"row justify-content-center"},[s("div",{staticClass:"col-xl-12 col-lg-12"},[s("div",{staticClass:"section-title text-center",staticStyle:{"margin-bottom":"20px"}},[s("h2",[e._v(e._s(e.$t("deleteResourceManager.title1"))+" "),s("span",[e._v(" "+e._s(e.$t("deleteResourceManager.title2")))])]),e._v(" "),s("p",{attrs:{align:"right"}},[e._v(e._s(e.$t("deleteResourceManager.validTime")))])])])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0!==e.deletedSelect.length,expression:"deletedSelect.length !== 0"}],staticClass:"div-operation-box"},[s("el-button",{attrs:{type:"primary",plain:"",round:""},on:{click:e.deleteResourceBinRecord}},[e._v("\n          "+e._s(e.$t("delete"))+"\n        ")]),e._v(" "),s("el-button",{attrs:{type:"success",plain:"",round:""},on:{click:e.reinstateResource}},[e._v("\n          "+e._s(e.$t("deleteResourceManager.recover"))+"\n        ")])],1),e._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-xl-12 col-lg-12"},[s("div",{staticClass:"transaction-area"},[s("div",{staticClass:"tab-content",attrs:{id:"myTabContent"}},[s("div",{staticClass:"tab-pane fade show active",attrs:{id:"deposit",role:"tabpanel","aria-labelledby":"home-tab"}},[s("el-checkbox-group",{model:{value:e.deletedSelect,callback:function(t){e.deletedSelect=t},expression:"deletedSelect"}},[s("table",{staticClass:"table"},[s("thead",{attrs:{align:"center"}},[s("tr",[s("th",{attrs:{scope:"col"}},[s("el-checkbox",{on:{change:function(t){return e.handleCheckAllChange()}},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("\n                          "+e._s(e.checkAll?e.$t("cancelButton"):e.$t("selectAll"))+"\n                        ")])],1),e._v(" "),s("th",{attrs:{scope:"col"}}),e._v(" "),s("th",{attrs:{scope:"col"}},[e._v(e._s(e.$t("deleteResourceManager.fileName")))]),e._v(" "),s("th",{attrs:{scope:"col"}},[e._v(e._s(e.$t("deleteResourceManager.fileSize")))]),e._v(" "),s("th",{attrs:{scope:"col"}},[e._v(e._s(e.$t("deleteResourceManager.discipline")))])])]),e._v(" "),s("tbody",e._l(e.deletedTableData,function(t,a){return s("tr",{key:a},[s("td",{attrs:{align:"center"}},[s("el-checkbox",{attrs:{label:t}},[e._v(" ")])],1),e._v(" "),s("td",[e._v("\n                        "+e._s(e.getTimePass(t.time))+"\n                      ")]),e._v(" "),s("td",[e._v("\n                        "+e._s(t.origin_name)+"\n                      ")]),e._v(" "),s("td",[e._v("\n                        "+e._s(t.size)+"\n                      ")]),e._v(" "),s("td",[e._v("\n                        "+e._s(e.translateDisciplineToSelectedLanguage(t.discipline))+"\n                      ")])])}),0)])]),e._v(" "),s("div",{attrs:{align:"center"}},[s("el-pagination",{attrs:{"current-page":e.deletedPageData.currentPage,"page-size":e.deletedPageData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.deletedPageData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])])])])])])])},staticRenderFns:[]};var n=s("VU/8")(a,i,!1,function(e){s("O6WN")},"data-v-60511f4e",null);t.default=n.exports}});
//# sourceMappingURL=16.12fe8e01fa2bd62da789.js.map