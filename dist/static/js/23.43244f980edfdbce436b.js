webpackJsonp([23],{rFa8:function(e,t){},royc:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={name:"PlatformResourceManager",data:function(){return{tablePageData:{search:"",currentPage:-1,pageSize:10,total:-1},tableDataList:[],resourceSelectList:[]}},created:function(){this.loadResourceList()},methods:{handleSizeChange:function(e){this.tablePageData.pageSize=e,this.loadResourceList()},handleCurrentChange:function(e){this.tablePageData.currentPage=e,this.loadResourceList()},handleSelectionChange:function(){this.resourceSelectList=[];var e=this.$refs.multipleTable.selection;if(0!==e.length)for(var t=0;t<e.length;++t)this.resourceSelectList.push(e[t].resource.id)},cancelSelection:function(){this.$refs.multipleTable.clearSelection(),this.selectCheckList=[]},loadResourceList:function(){var e=this;this.$axios.post("/platform/getResourceList",this.tablePageData).then(function(t){var a=t.data;if(console.log(a),8006===a.code){e.tablePageData.currentPage=a.data.currentPage,e.tablePageData.pageSize=a.data.pageSize,e.tablePageData.total=a.data.total,e.tableDataList=a.data.pageList;for(var r=0;r<e.tableDataList.length;++r)e.tableDataList[r].resource.discipline=e.translateDisciplineToSelectedLanguage(e.tableDataList[r].resource.discipline)}else e.$message.error(a.code+"~~~~"+e.$t("serverError"))})},searchResource:function(){this.tablePageData.search?(this.tablePageData.currentPage=-1,this.tablePageData.total=-1,this.loadResourceList()):this.$message.info(this.$t("platformResourceManager.inputSearchKeyword"))},reloadResourceList:function(){this.tablePageData.currentPage=-1,this.tablePageData.total=-1,this.tablePageData.search="",this.loadResourceList()},deleteSelectResource:function(){var e=this;this.$axios.post("/platform/deleteResourceByIds",this.resourceSelectList).then(function(t){var a=t.data;console.log(a),8007===a.code?(e.$message({message:a.code+"~~~~"+e.$t("deleteSuccess"),type:"success",duration:1500}),e.tablePageData.currentPage=-1,e.tablePageData.total=-1,e.tablePageData.search="",e.loadResourceList()):e.$message.error(a.code+"~~~~"+e.$t("serverError"))}),this.cancelSelection()},translateDisciplineToSelectedLanguage:function(e){switch(e){case"全部":return this.$t("recommendationContent.all");case"法学":return this.$t("disciplines.law");case"工学":return this.$t("disciplines.engineering");case"管理学":return this.$t("disciplines.management");case"计算机科学":return this.$t("disciplines.computerScience");case"教育学":return this.$t("disciplines.education");case"经济学":return this.$t("disciplines.economics");case"军事学":return this.$t("disciplines.militaryScience");case"理学":return this.$t("disciplines.science");case"历史学":return this.$t("disciplines.history");case"农学":return this.$t("disciplines.agronomy");case"文学":return this.$t("disciplines.literature");case"医学":return this.$t("disciplines.medicine");case"艺术学":return this.$t("disciplines.artStudies");case"哲学":return this.$t("disciplines.philosophy")}}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"div_platform_resource_box"}},[a("div",{staticStyle:{margin:"3%",width:"94%"}},[a("h3",[e._v(e._s(e.$t("platformResourceManager.title")))]),e._v(" "),a("div",{staticClass:"div-top-operation-box"},[a("div",{staticClass:"div-delete"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==this.resourceSelectList.length,expression:"this.resourceSelectList.length !== 0"}],attrs:{type:"danger",plain:"",round:""},on:{click:e.deleteSelectResource}},[e._v("\n          "+e._s(e.$t("platformResourceManager.delete"))+"\n        ")])],1),e._v(" "),a("div",{staticClass:"div-search-form"},[a("el-form",{ref:"searchForm",staticStyle:{width:"100%"},attrs:{model:e.tablePageData,"label-width":"100px",align:"right"}},[a("el-form-item",[a("el-input",{staticStyle:{width:"60%","margin-right":"20px"},attrs:{placeholder:""+e.$t("platformResourceManager.placeholderPrompt")},model:{value:e.tablePageData.search,callback:function(t){e.$set(e.tablePageData,"search",t)},expression:"tablePageData.search"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search",circle:""},on:{click:e.searchResource}}),e._v(" "),a("el-button",{attrs:{type:"info",circle:""},on:{click:e.reloadResourceList}},[a("i",{staticClass:"el-icon-refresh"})])],1)],1)],1)]),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableDataList,"default-sort":{prop:"resource.upload_time",order:"descending"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"resource.upload_time",label:""+e.$t("platformResourceManager.uploadTime"),sortable:"","min-width":"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"user.username",label:""+e.$t("platformResourceManager.owner"),"min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userInfo.name",label:""+e.$t("platformResourceManager.alias"),"min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"resource.origin_name",label:""+e.$t("platformResourceManager.fileName"),"min-width":"300"}}),e._v(" "),a("el-table-column",{attrs:{prop:"resource.discipline",label:""+e.$t("platformResourceManager.discipline"),"min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{label:""+e.$t("platformResourceManager.overview"),"min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"bottom",title:""+e.$t("platformResourceManager.resourceIntroduction"),width:"500",trigger:"click",content:t.row.resource.description}},[a("el-button",{attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.$t("platformResourceManager.introductionReview")))])],1)]}}])})],1),e._v(" "),a("div",{staticClass:"block",attrs:{align:"center"}},[a("br"),e._v(" "),a("el-pagination",{attrs:{background:"","current-page":e.tablePageData.currentPage,"page-size":e.tablePageData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.tablePageData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])},staticRenderFns:[]};var i=a("VU/8")(r,s,!1,function(e){a("rFa8")},"data-v-19dc5ba0",null);t.default=i.exports}});
//# sourceMappingURL=23.43244f980edfdbce436b.js.map