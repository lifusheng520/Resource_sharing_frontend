webpackJsonp([22],{"26Wn":function(t,e){},lfHV:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"FocusManager",data:function(){return{isEmpty:!0,focusTableList:[],focusPageData:{user_id:"",currentPage:-1,total:-1,pageSize:10},focusForm:{userId:"",focusUserId:""}}},created:function(){this.getLoginUserInfo(),this.getFocusList()},methods:{cancelFocus:function(t){this.focusForm.userId=t.user_id,this.focusForm.focusUserId=t.focus_uid;var e=this;this.$axios.post("/focus/cancel",this.focusForm).then(function(t){var a=t.data;console.log(a),6004==a.code?e.deleteFocusTableListItem(a.data):e.$message.error(a.code+"~~~~"+e.$t("serverError"))})},deleteFocusTableListItem:function(t){for(var e=0;e<this.focusTableList.length;++e)if(this.focusTableList[e].focus_uid==t)return void this.focusTableList.splice(e,1)},toggleSelection:function(){this.$refs.multipleTable.clearSelection()},handleSizeChange:function(t){this.focusPageData.pageSize=t,this.getFocusList()},handleCurrentChange:function(t){this.focusPageData.currentPage=t,this.getFocusList()},getFocusList:function(){var t=this;this.$axios.post("/focus/getInfo",this.focusPageData).then(function(e){var a=e.data;6006==a.code?(t.focusPageData.currentPage=a.data.currentPage,t.focusPageData.pageSize=a.data.pageSize,t.focusPageData.total=a.data.total,t.focusTableList=a.data.pageList):t.$message.error(a.code+"~~~~"+t.$t("serverError"))})},getLoginUserInfo:function(){var t=this.$cookies.get("user_id");t?(this.focusPageData.user_id=t,this.isEmpty=!1):this.isEmpty=!0},goFocusPage:function(t){"/focus"!==this.$route.path&&(this.$cookies.set("focus_uid",t),this.$router.push("/focus"))}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"div_focus_box"}},[this.isEmpty?a("el-empty",{staticStyle:{margin:"20% auto"},attrs:{description:"网络开小差了，请重新登录~~~"}}):a("div",{staticStyle:{margin:"3%",width:"94%"}},[a("h3",[t._v(t._s(t.$t("focusManager.title")))]),t._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.focusTableList,"default-sort":{prop:"time",order:"descending"}}},[a("el-table-column",{attrs:{prop:"time",label:""+t.$t("date"),sortable:"","min-width":"110"}}),t._v(" "),a("el-table-column",{attrs:{prop:"resource_name",label:"","min-width":"60"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("div",{staticClass:"div-user-icon"},[t.row.focusUserIcon?a("img",{attrs:{src:t.row.focusUserIcon,alt:""}}):a("img",{attrs:{src:"static/ico/none.png",alt:""}})])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"focusUserName",label:""+t.$t("alias"),"min-width":"100"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"100px",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popconfirm",{attrs:{title:""+t.$t("focusManager.cancelFocusNotice")},on:{confirm:function(a){return t.cancelFocus(e.row)},cancel:t.toggleSelection}},[a("el-button",{attrs:{slot:"reference",type:"danger",plain:""},slot:"reference"},[t._v(t._s(t.$t("focusManager.cancelFocus")))])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{"min-width":"100px",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",plain:""},on:{click:function(a){return t.goFocusPage(e.row.focus_uid)}}},[t._v(t._s(t.$t("focusManager.browseContent")))])]}}])})],1),t._v(" "),a("div",{staticClass:"block",attrs:{align:"center"}},[a("br"),t._v(" "),a("el-pagination",{attrs:{background:"","current-page":t.focusPageData.currentPage,"page-size":t.focusPageData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.focusPageData.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1)},staticRenderFns:[]};var i=a("VU/8")(s,o,!1,function(t){a("26Wn")},"data-v-31b4be61",null);e.default=i.exports}});
//# sourceMappingURL=22.7f77f6d6709b3513de65.js.map