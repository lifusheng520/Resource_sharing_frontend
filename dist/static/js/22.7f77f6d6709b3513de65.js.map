{"version":3,"sources":["webpack:///src/components/user/focus/FocusManager.vue","webpack:///./src/components/user/focus/FocusManager.vue?e0b5","webpack:///./src/components/user/focus/FocusManager.vue"],"names":["FocusManager","name","data","isEmpty","focusTableList","focusPageData","user_id","currentPage","total","pageSize","focusForm","userId","focusUserId","created","this","getLoginUserInfo","getFocusList","methods","cancelFocus","row","focus_uid","out_this","$axios","post","then","response","resData","console","log","code","deleteFocusTableListItem","$message","error","$t","i","length","splice","toggleSelection","$refs","multipleTable","clearSelection","handleSizeChange","val","handleCurrentChange","pageList","$cookies","get","goFocusPage","$route","path","set","$router","push","focus_FocusManager","render","_vm","_h","$createElement","_c","_self","attrs","id","staticStyle","margin","description","width","_v","_s","ref","default-sort","prop","order","label","sortable","min-width","scopedSlots","_u","key","fn","scope","staticClass","src","focusUserIcon","alt","fixed","title","on","confirm","$event","cancel","slot","type","plain","click","align","background","current-page","page-size","layout","size-change","current-change","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/22.7f77f6d6709b3513de65.js","sourcesContent":["<template>\n  <div id=\"div_focus_box\">\n    <el-empty v-if=\"this.isEmpty\" style=\"margin: 20% auto\" description=\"网络开小差了，请重新登录~~~\"></el-empty>\n    <div v-else style=\"margin: 3%; width: 94%\">\n\n\n      <h3>{{$t('focusManager.title')}}</h3>\n\n      <el-table :data=\"focusTableList\" ref=\"multipleTable\"\n                style=\"width: 100%;\"\n                :default-sort=\"{prop: 'time', order: 'descending'}\">\n\n        <el-table-column prop=\"time\" :label=\"`${$t('date')}`\" sortable min-width=\"110\"></el-table-column>\n\n\n        <el-table-column prop=\"resource_name\" label=\"\" min-width=\"60\">\n          <template slot-scope=\"scope\">\n            <div class=\"div-user-icon\">\n              <img v-if=\"scope.row.focusUserIcon\" :src=\"scope.row.focusUserIcon\" alt=\"\">\n              <img v-else src=\"static/ico/none.png\" alt=\"\">\n            </div>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"focusUserName\" :label=\"`${$t('alias')}`\" min-width=\"100\"></el-table-column>\n\n        <el-table-column min-width=\"100px\" fixed=\"right\">\n          <template slot-scope=\"scope\">\n            <el-popconfirm :title=\"`${$t('focusManager.cancelFocusNotice')}`\" @confirm=\"cancelFocus(scope.row)\"\n                           @cancel=\"toggleSelection\">\n              <el-button slot=\"reference\" type=\"danger\" plain>{{ $t('focusManager.cancelFocus') }}</el-button>\n            </el-popconfirm>\n          </template>\n        </el-table-column>\n\n        <el-table-column  min-width=\"100px\" fixed=\"right\">\n          <template slot-scope=\"scope\">\n            <el-button @click=\"goFocusPage(scope.row.focus_uid)\" type=\"text\" plain>{{$t('focusManager.browseContent')}}</el-button>\n          </template>\n        </el-table-column>\n\n      </el-table>\n\n      <div class=\"block\" align=\"center\">\n        <br>\n        <el-pagination\n          background @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\"\n          :current-page=\"focusPageData.currentPage\" :page-size=\"focusPageData.pageSize\"\n          layout=\"total, sizes, prev, pager, next, jumper\" :total=\"focusPageData.total\">\n        </el-pagination>\n      </div>\n\n    </div>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: \"FocusManager\",\n    data() {\n      return {\n        isEmpty: true,\n        focusTableList: [],\n        focusPageData: {\n          user_id: '',\n          currentPage: -1,\n          total: -1,\n          pageSize: 10\n        },\n        focusForm: {\n          userId: '',\n          focusUserId: '',\n        }\n      }\n    },\n    created() {\n      // 获取登录信息\n      this.getLoginUserInfo();\n\n      // 获取用户登录列表\n      this.getFocusList();\n    },\n    methods: {\n      // 取消关注\n      cancelFocus(row) {\n        // 设置关注表单参数\n        this.focusForm.userId = row.user_id;\n        this.focusForm.focusUserId = row.focus_uid;\n\n        // 发起取消关注请求\n        let out_this = this;\n        this.$axios.post('/focus/cancel', this.focusForm).then(response => {\n          let resData = response.data;\n          console.log(resData);\n\n          if (resData.code == 6004) {\n            out_this.deleteFocusTableListItem(resData.data);\n          } else {\n            out_this.$message.error(resData.code + '~~~~' + out_this.$t('serverError'));\n          }\n\n        });\n\n      },\n      // 将取消关注的行删除\n      deleteFocusTableListItem(focus_uid) {\n        for (let i = 0; i < this.focusTableList.length; ++i) {\n          if (this.focusTableList[i].focus_uid == focus_uid) {\n            this.focusTableList.splice(i, 1);\n            return;\n          }\n        }\n      },\n      //  取消选择\n      toggleSelection() {\n        this.$refs.multipleTable.clearSelection();\n      },\n      // 改变每页的大小时的事件\n      handleSizeChange(val) {\n        this.focusPageData.pageSize = val;\n        this.getFocusList();\n      },\n      // 改变当前页码的事件\n      handleCurrentChange(val) {\n        this.focusPageData.currentPage = val;\n        this.getFocusList();\n      },\n      // 获取关注列表\n      getFocusList() {\n        let out_this = this;\n        this.$axios.post('/focus/getInfo', this.focusPageData).then(response => {\n          let resData = response.data;\n          //console.log(resData);\n\n          if (resData.code == 6006) {\n            out_this.focusPageData.currentPage = resData.data.currentPage;\n            out_this.focusPageData.pageSize = resData.data.pageSize;\n            out_this.focusPageData.total = resData.data.total;\n            out_this.focusTableList = resData.data.pageList;\n\n          } else {\n            out_this.$message.error(resData.code + '~~~~' + out_this.$t('serverError'));\n          }\n\n        });\n\n      },\n      // 获取登录用户信息\n      getLoginUserInfo() {\n        let userId = this.$cookies.get('user_id');\n        if (userId) {\n          this.focusPageData.user_id = userId;\n          this.isEmpty = false;\n        } else {\n          this.isEmpty = true;\n        }\n      },\n      // 跳转到关注首页\n      goFocusPage(val) {\n        if(this.$route.path !== '/focus'){\n          // 添加需要查看的用户id\n          this.$cookies.set('focus_uid', val);\n          this.$router.push('/focus');\n        }\n      }\n    }\n  }\n</script>\n\n<style scoped>\n\n  #div_focus_box {\n    width: 95%;\n  }\n\n  .div-user-icon {\n    height: 60px;\n    width: 60px;\n    border-radius: 50%;\n    overflow: hidden;\n  }\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/user/focus/FocusManager.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"div_focus_box\"}},[(this.isEmpty)?_c('el-empty',{staticStyle:{\"margin\":\"20% auto\"},attrs:{\"description\":\"网络开小差了，请重新登录~~~\"}}):_c('div',{staticStyle:{\"margin\":\"3%\",\"width\":\"94%\"}},[_c('h3',[_vm._v(_vm._s(_vm.$t('focusManager.title')))]),_vm._v(\" \"),_c('el-table',{ref:\"multipleTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.focusTableList,\"default-sort\":{prop: 'time', order: 'descending'}}},[_c('el-table-column',{attrs:{\"prop\":\"time\",\"label\":(\"\" + (_vm.$t('date'))),\"sortable\":\"\",\"min-width\":\"110\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"resource_name\",\"label\":\"\",\"min-width\":\"60\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"div-user-icon\"},[(scope.row.focusUserIcon)?_c('img',{attrs:{\"src\":scope.row.focusUserIcon,\"alt\":\"\"}}):_c('img',{attrs:{\"src\":\"static/ico/none.png\",\"alt\":\"\"}})])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"focusUserName\",\"label\":(\"\" + (_vm.$t('alias'))),\"min-width\":\"100\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":\"100px\",\"fixed\":\"right\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-popconfirm',{attrs:{\"title\":(\"\" + (_vm.$t('focusManager.cancelFocusNotice')))},on:{\"confirm\":function($event){return _vm.cancelFocus(scope.row)},\"cancel\":_vm.toggleSelection}},[_c('el-button',{attrs:{\"slot\":\"reference\",\"type\":\"danger\",\"plain\":\"\"},slot:\"reference\"},[_vm._v(_vm._s(_vm.$t('focusManager.cancelFocus')))])],1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":\"100px\",\"fixed\":\"right\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.goFocusPage(scope.row.focus_uid)}}},[_vm._v(_vm._s(_vm.$t('focusManager.browseContent')))])]}}])})],1),_vm._v(\" \"),_c('div',{staticClass:\"block\",attrs:{\"align\":\"center\"}},[_c('br'),_vm._v(\" \"),_c('el-pagination',{attrs:{\"background\":\"\",\"current-page\":_vm.focusPageData.currentPage,\"page-size\":_vm.focusPageData.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.focusPageData.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-31b4be61\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/user/focus/FocusManager.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-31b4be61\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./FocusManager.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./FocusManager.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./FocusManager.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-31b4be61\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./FocusManager.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-31b4be61\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/user/focus/FocusManager.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}