webpackJsonp([25],{"E/Uw":function(e,t){},ksrj:function(e,t,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={name:"CheckResource",data:function(){return{checkResourcePageData:{search:"",currentPage:-1,pageSize:10,total:-1},checkResourceTableList:[],selectCheckList:[],videoDialogVisible:!1,videoHostURL:"",videoFileName:""}},created:function(){this.loadCheckResourceList()},methods:{handleSizeChange:function(e){this.checkResourcePageData.currentPage=-1,this.checkResourcePageData.total=-1,this.checkResourcePageData.pageSize=e,this.loadCheckResourceList()},handleCurrentChange:function(e){this.checkResourcePageData.currentPage=e,this.loadCheckResourceList()},handleSelectionChange:function(){var e=this.$refs.multipleTable.selection;if(0!==e.length)for(var t=0;t<e.length;++t)this.selectCheckList.push(e[t].id);else this.selectCheckList=[]},cancelSelection:function(){this.$refs.multipleTable.clearSelection(),this.selectCheckList=[]},loadCheckResourceList:function(){var e=this;this.$axios.post("/platform/getCheckResourceList",this.checkResourcePageData).then(function(t){var c=t.data;if(8008===c.code){e.checkResourcePageData.currentPage=c.data.currentPage,e.checkResourcePageData.pageSize=c.data.pageSize,e.checkResourcePageData.total=c.data.total,e.checkResourceTableList=c.data.pageList;for(var s=0;s<e.checkResourceTableList.length;++s)e.checkResourceTableList[s].discipline=e.translateDisciplineToSelectedLanguage(e.checkResourceTableList[s].discipline)}else e.$message.error(c.code+"~~~~"+e.$t("checkResource.loadingError"))})},loadCheckResourceBySearch:function(){this.checkResourcePageData.currentPage=-1,this.checkResourcePageData.total=-1,this.loadCheckResourceList()},reloadCheckResourceList:function(){this.checkResourcePageData.currentPage=-1,this.checkResourcePageData.total=-1,this.checkResourcePageData.search="",this.loadCheckResourceList()},passCheckHandler:function(){var e=this;this.$axios.post("/platform/passResourceCheck",this.selectCheckList).then(function(t){var c=t.data;console.log(c),8009===c.code?(e.checkResourcePageData.currentPage=-1,e.checkResourcePageData.total=-1,e.loadCheckResourceList()):e.$message.error(c.code+"~~~~"+e.$t("serverError"))}),this.cancelSelection()},deleteCheckResourceHandler:function(){var e=this;this.$axios.post("/platform/deleteCheckResource",this.selectCheckList).then(function(t){var c=t.data;console.log(c),8007===c.code?(e.$message({message:c.code+"~~~~"+e.$t("checkResource.deleted"),type:"success",duration:1500}),e.checkResourcePageData.currentPage=-1,e.checkResourcePageData.total=-1,e.loadCheckResourceList()):e.$message.error(c.code+"~~~~"+e.$t("serverError"))}),this.cancelSelection()},playVideoHandler:function(e,t){this.videoDialogVisible=!0,this.videoHostURL=this.$axios.defaults.baseURL+"/resource/server/getVideo/"+e,this.videoFileName=t},closeDialogHandler:function(){document.getElementById("video-check-resource").pause()},supportVideoType:function(e){return"mp4"===e||("webm"===e||"ogg"===e)},translateDisciplineToSelectedLanguage:function(e){switch(e){case"全部":return this.$t("recommendationContent.all");case"法学":return this.$t("disciplines.law");case"工学":return this.$t("disciplines.engineering");case"管理学":return this.$t("disciplines.management");case"计算机科学":return this.$t("disciplines.computerScience");case"教育学":return this.$t("disciplines.education");case"经济学":return this.$t("disciplines.economics");case"军事学":return this.$t("disciplines.militaryScience");case"理学":return this.$t("disciplines.science");case"历史学":return this.$t("disciplines.history");case"农学":return this.$t("disciplines.agronomy");case"文学":return this.$t("disciplines.literature");case"医学":return this.$t("disciplines.medicine");case"艺术学":return this.$t("disciplines.artStudies");case"哲学":return this.$t("disciplines.philosophy")}}}},a={render:function(){var e=this,t=e.$createElement,c=e._self._c||t;return c("div",{attrs:{id:"div_check_resource_box"}},[c("div",[c("h3",[e._v(e._s(e.$t("checkResource.title")))]),e._v(" "),c("div",{staticStyle:{width:"100%"}},[c("div",{staticClass:"div-top-check-resource-operation-box"},[c("div",{staticClass:"div-check-resource-delete"},[c("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==this.selectCheckList.length,expression:"this.selectCheckList.length !== 0"}],attrs:{type:"danger",size:"small",round:""},on:{click:e.passCheckHandler}},[e._v("\n            "+e._s(e.$t("checkResource.passCheck"))+"\n          ")]),e._v(" "),c("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==this.selectCheckList.length,expression:"this.selectCheckList.length !== 0"}],attrs:{type:"danger",size:"small",round:""},on:{click:e.deleteCheckResourceHandler}},[e._v("\n            "+e._s(e.$t("checkResource.deleteResource"))+"\n          ")])],1),e._v(" "),c("div",{staticClass:"div-check-resource-search-form"},[c("el-form",{ref:"searchForm",staticStyle:{width:"100%"},attrs:{model:e.checkResourcePageData,"label-width":"100px",align:"right"}},[c("el-form-item",[c("el-input",{staticStyle:{width:"60%","margin-right":"20px"},attrs:{placeholder:""+e.$t("checkResource.placeholderPrompt")},model:{value:e.checkResourcePageData.search,callback:function(t){e.$set(e.checkResourcePageData,"search",t)},expression:"checkResourcePageData.search"}}),e._v(" "),c("el-button",{attrs:{type:"primary",icon:"el-icon-search",circle:""},on:{click:e.loadCheckResourceBySearch}}),e._v(" "),c("el-button",{attrs:{type:"info",circle:""},on:{click:e.reloadCheckResourceList}},[c("i",{staticClass:"el-icon-refresh"})])],1)],1)],1)]),e._v(" "),c("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.checkResourceTableList,"default-sort":{prop:"upload_time",order:"descending"}},on:{"selection-change":e.handleSelectionChange}},[c("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),c("el-table-column",{attrs:{prop:"upload_time",label:""+e.$t("checkResource.uploadTime"),sortable:"","min-width":"150"}}),e._v(" "),c("el-table-column",{attrs:{label:""+e.$t("checkResource.state"),"min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return["审批中"===t.row.state?c("el-tag",{attrs:{type:"danger"}},[c("i",{staticClass:"el-icon-loading"}),e._v(e._s(e.$t("checkResource.waitting"))+"\n            ")]):c("el-tag",{attrs:{type:"info"}},[e._v(e._s("已通过审批"==t.row.state?e.$t("checkResource.passed"):e.$t("checkResource.waitting")))])]}}])}),e._v(" "),c("el-table-column",{attrs:{prop:"origin_name",label:""+e.$t("checkResource.fileName"),"min-width":"350"}}),e._v(" "),c("el-table-column",{attrs:{prop:"discipline",label:""+e.$t("checkResource.discipline"),"min-width":"120"}}),e._v(" "),c("el-table-column",{attrs:{label:"","min-width":"120",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.supportVideoType(t.row.type)?c("el-button",{attrs:{slot:"reference"},on:{click:function(c){return e.playVideoHandler(t.row.id,t.row.origin_name)}},slot:"reference"},[c("i",{staticClass:"fa fa-play-circle fa-2x"})]):c("span",[e._v(e._s(e.$t("checkResource.donotSupportPlay")))])]}}])}),e._v(" "),c("el-table-column",{attrs:{label:""+e.$t("checkResource.resourceIntroduction"),"min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[c("el-popover",{attrs:{placement:"bottom",title:""+e.$t("checkResource.resourceIntroduction"),width:"500",trigger:"click",content:t.row.description}},[c("el-button",{attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.$t("checkResource.introductionReview")))])],1)]}}])})],1)],1),e._v(" "),c("div",{staticClass:"block",attrs:{align:"center"}},[c("br"),e._v(" "),c("el-pagination",{attrs:{background:"","current-page":e.checkResourcePageData.currentPage,"page-size":e.checkResourcePageData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.checkResourcePageData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),c("el-dialog",{staticStyle:{"margin-top":"-5%"},attrs:{title:""+e.$t("checkResource.checking")+e.videoFileName,visible:e.videoDialogVisible,width:"90%",center:""},on:{"update:visible":function(t){e.videoDialogVisible=t},close:e.closeDialogHandler}},[c("div",{staticStyle:{width:"100%"},attrs:{align:"center"}},[c("video",{staticStyle:{position:"absolute",top:"60px",left:"0",width:"100%",height:"auto"},attrs:{id:"video-check-resource",controls:"",src:e.videoHostURL}})])])],1)])},staticRenderFns:[]};var i=c("VU/8")(s,a,!1,function(e){c("E/Uw")},"data-v-04a71137",null);t.default=i.exports}});
//# sourceMappingURL=25.98b8a8717e82429c6a80.js.map