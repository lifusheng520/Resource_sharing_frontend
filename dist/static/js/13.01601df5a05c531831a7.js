webpackJsonp([13],{jsfj:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l={name:"AddUpload",data:function(){return{backendURL:this.$axios.defaults.baseURL,isEmpty:"",fileForm:{user_id:"",discipline:"",fileList:[],textarea:""},uploadSuccessList:[],rules:{discipline:[{required:!0,message:this.$t("addUpload.rule1"),trigger:"blur"}],textarea:[{required:!0,message:this.$t("addUpload.rule2"),trigger:"blur"}]},dialogImageUrl:"",dialogVisible:!1,disabled:!1}},created:function(){var e=this.$cookies.get("user_id");e?(this.fileForm.user_id=e,this.isEmpty=!1):(this.$message({message:this.$t("sessionExpired"),type:"warning"}),this.isEmpty=!0)},methods:{submitUpload:function(e){if(!this.fileForm.discipline)return this.$message.warning(this.$t("addUpload.rule1")),!1;this.fileForm.textarea?this.fileForm.textarea.length>=500?this.$message.warning(this.$t("addUpload.rule3")):this.$refs.upload.submit():this.$message.warning(this.$t("addUpload.rule2"))},clearUploadFiles:function(){this.$refs.upload.clearFiles()},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},successHandle:function(e,t,i){4013===e.code?(this.$message({message:e.code+" ~~~~  "+this.$t("addUpload.uploadSuccess"),type:"success",center:!0,duration:2e3}),this.uploadSuccessList.push(t)):this.$message.error(e.code+" ~~~~  "+this.$t("serverError"))},failHandle:function(e,t,i){this.$message({message:e.code+" ~~~~  "+this.$t("serverError"),type:"error",center:!0,duration:2500})}}},s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"div_content"}},[this.isEmpty?i("el-empty",{staticStyle:{margin:"20%"},attrs:{description:""+e.$t("notFound404")}}):i("div",[i("h2",[e._v(e._s(e.$t("addUpload.title")))]),i("br"),i("br"),e._v(" "),i("el-form",{ref:"fileForm",staticClass:"demo-ruleForm",attrs:{model:e.fileForm,rules:e.rules,"label-width":"200px"}},[i("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{"with-credentials":"",action:e.backendURL+"/resource/upload/"+e.fileForm.user_id+"/"+e.fileForm.discipline+"/"+e.fileForm.textarea,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":this.fileForm.fileList,"on-success":e.successHandle,"on-error":e.failHandle,"auto-upload":!1,multiple:""}},[i("el-button",{attrs:{slot:"trigger",type:"primary"},slot:"trigger"},[e._v("\n          "+e._s(e.$t("addUpload.selectFiles"))+"\n        ")]),e._v(" "),i("br"),i("br"),e._v(" "),i("div",{staticClass:"el-upload__tip",staticStyle:{"font-size":"20px"},attrs:{slot:"tip"},slot:"tip"},[e._v("\n          "+e._s(e.$t("addUpload.filesUploadPrompt"))+"\n          "),i("p"),e._v(" "),i("p",{staticStyle:{"text-align":"left"}},[e._v("\n            "+e._s(e.$t("addUpload.selectedFiles"))+"\n          ")])])],1),e._v(" "),i("br"),e._v(" "),i("el-form-item",{attrs:{label:""+e.$t("addUpload.belongTo"),prop:"discipline"}},[i("el-select",{staticStyle:{"min-width":"300px"},attrs:{placeholder:""+e.$t("addUpload.placeholderPrompt")},model:{value:e.fileForm.discipline,callback:function(t){e.$set(e.fileForm,"discipline",t)},expression:"fileForm.discipline"}},[i("el-option",{attrs:{label:""+e.$t("disciplines.computerScience"),value:"计算机科学"}}),e._v(" "),i("el-option",{attrs:{label:""+e.$t("disciplines.philosophy"),value:"哲学"}}),e._v(" "),i("el-option",{attrs:{label:""+e.$t("disciplines.literature"),value:"文学"}}),e._v(" "),i("el-option",{attrs:{label:""+e.$t("disciplines.economics"),value:"经济学"}}),e._v(" "),i("el-option",{attrs:{label:""+e.$t("disciplines.artStudies"),value:"艺术学"}}),e._v(" "),i("el-option",{attrs:{label:""+e.$t("disciplines.science"),value:"理学"}}),e._v(" "),i("el-option",{attrs:{label:""+e.$t("disciplines.engineering"),value:"工学"}}),e._v(" "),i("el-option",{attrs:{label:""+e.$t("disciplines.education"),value:"教育学"}}),e._v(" "),i("el-option",{attrs:{label:""+e.$t("disciplines.history"),value:"历史学"}}),e._v(" "),i("el-option",{attrs:{label:""+e.$t("disciplines.medicine"),value:"医学"}}),e._v(" "),i("el-option",{attrs:{label:""+e.$t("disciplines.militaryScience"),value:"军事学"}}),e._v(" "),i("el-option",{attrs:{label:""+e.$t("disciplines.management"),value:"管理学"}}),e._v(" "),i("el-option",{attrs:{label:""+e.$t("disciplines.law"),value:"法学"}}),e._v(" "),i("el-option",{attrs:{label:""+e.$t("disciplines.agronomy"),value:"农学"}})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:""+e.$t("addUpload.resourceIntroduction"),prop:"textarea"}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:10},maxlength:"500","show-word-limit":"",placeholder:""+e.$t("addUpload.introductionPlaceholder")},model:{value:e.fileForm.textarea,callback:function(t){e.$set(e.fileForm,"textarea",t)},expression:"fileForm.textarea"}})],1)],1),e._v(" "),i("el-button",{staticStyle:{"margin-top":"5%"},attrs:{type:"success"},on:{click:function(t){return e.submitUpload("fileForm")}}},[e._v("\n      "+e._s(e.$t("submitButton"))+"\n    ")]),e._v(" "),i("el-button",{staticStyle:{"margin-top":"5%"},attrs:{type:"primary"},on:{click:e.clearUploadFiles}},[e._v("\n      "+e._s(e.$t("resetButton"))+"\n    ")])],1)],1)},staticRenderFns:[]};var a=i("VU/8")(l,s,!1,function(e){i("vvvO")},"data-v-c39efa78",null);t.default=a.exports},vvvO:function(e,t){}});
//# sourceMappingURL=13.01601df5a05c531831a7.js.map