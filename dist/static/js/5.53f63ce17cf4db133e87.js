webpackJsonp([5],{BSC1:function(e,t){},EY3A:function(e,t){},FvA2:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("ogzt"),r=s("uBSP"),i={name:"FocusDetail",data:function(){return{isEmpty:!1,focusUserInfoList:[],myPageData:{user_id:"",currentPage:1,pageSize:5,total:-1},currentSelectId:"",resourceInfoList:[],resourcePageData:{user_id:"",currentPage:1,pageSize:10,total:-1},backendBaseURL:this.$axios.defaults.baseURL}},created:function(){this.getLoginUserInfoByRouter(),this.getUserFocusList()},methods:{getUserFocusList:function(){var e=this;this.$axios.post("/focus/getInfo",this.myPageData).then(function(t){var s=t.data;if(6006==s.code){if(e.focusUserInfoList=s.data.pageList,e.myPageData.currentPage=s.data.currentPage,e.myPageData.total=s.data.total,e.focusUserInfoList=s.data.pageList,!e.currentSelectId){var a=e.$cookies.get("focus_uid");e.currentSelectId=a||e.focusUserInfoList[0].focus_uid,e.loadFocusUserResource(e.currentSelectId)}}else e.$message.error(s.code+"~~~~"+e.$t("serverError"))})},getLoginUserInfoByRouter:function(){var e=this.$cookies.get("user_id");return e?(this.myPageData.user_id=e,e):(this.$message.info(this.$t("sessionExpired")),this.$router.push("/login"),!1)},getNextPageData:function(e){this.myPageData.currentPage+=e,this.getUserFocusList()},isAvailablePage:function(e){var t=this.myPageData.total/this.myPageData.pageSize,s=Math.ceil(t),a=this.myPageData.currentPage+e;return a>=1&&a<=s},loadFocusUserResourceHandler:function(e){this.resourcePageData.total=-1,this.resourcePageData.currentPage=-1,this.loadFocusUserResource(e)},loadFocusUserResource:function(e){this.currentSelectId=e,this.resourcePageData.user_id=e;var t=this;this.$axios.post("/resource/server/getList",this.resourcePageData).then(function(e){var s=e.data;6007==s.code?(t.resourcePageData.currentPage=s.data.currentPage,t.resourcePageData.total=s.data.total,t.resourcePageData.pageSize=s.data.pageSize,t.resourceInfoList=s.data.pageList):t.$message.error(s.code+"~~~~"+t.$t("serverError"))})},goResourceDetail:function(e){this.$cookies.set("resource_id",e),this.$router.push("/detail")},handleSizeChange:function(e){this.resourcePageData.pageSize=e,this.loadFocusUserResource(this.currentSelectId)},handleCurrentChange:function(e){this.resourcePageData.currentPage=e,this.loadFocusUserResource(this.currentSelectId)},resourceSupportHandler:function(e){var t=this.getLoginUserInfoByRouter();if(t){var s=this;this.$axios.get("/support/resource/"+t+"/"+e).then(function(t){var a=t.data;console.log(a),6051==a.code?(s.$message({message:a.code+"~~~~"+s.$t("supportSuccess"),type:"success",duration:2e3}),s.setResourceSupportNumber(e,1)):6052==a.code?s.setResourceSupportNumber(e,-1):s.$message.error(a.code+"~~~~"+s.$t("serverError"))})}},setResourceSupportNumber:function(e,t){for(var s=0;s<this.resourceInfoList.length;++s)if(this.resourceInfoList[s].resource.id==e)return void(this.resourceInfoList[s].resource.supportNumber+=t)}}},o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[this.isEmpty?s("el-empty",{staticStyle:{margin:"0",background:"white",height:"700px"},attrs:{description:""+e.$t("notFound404")}}):s("div",[s("div",{staticClass:"div-focus-user-list-box"},[s("div",{staticClass:"div-focus-user-box-left"},[s("el-button",{attrs:{disabled:!e.isAvailablePage(-1),type:"info",plain:""},on:{click:function(t){return e.getNextPageData(-1)}}},[s("i",{staticClass:"el-icon-arrow-left"})])],1),e._v(" "),e.focusUserInfoList.length?s("div",{staticClass:"div-focus-user-list"},e._l(e.focusUserInfoList,function(t,a){return s("div",{key:a},[s("div",{class:t.focus_uid==e.currentSelectId?"div-focus-user-item-select":"div-focus-user-item",on:{click:function(s){return e.loadFocusUserResourceHandler(t.focus_uid)}}},[s("div",{staticClass:"div-focus-user-headIcon"},[t.focusUserIcon?s("img",{attrs:{src:t.focusUserIcon,alt:""}}):s("img",{attrs:{src:"static/ico/ico.png",alt:""}})]),e._v(" "),s("div",{attrs:{align:"center"}},[e._v("\n              "+e._s(t.focusUserName)+"\n            ")])])])}),0):s("div",{staticStyle:{width:"100%"}},[s("br"),s("br"),e._v(" "),s("p",{attrs:{align:"center"}},[e._v(e._s(e.$t("focusDetail.notFocusYet")))])]),e._v(" "),s("div",{staticClass:"div-focus-user-box-right"},[s("el-button",{attrs:{disabled:!e.isAvailablePage(1),type:"info",plain:""},on:{click:function(t){return e.getNextPageData(1)}}},[s("i",{staticClass:"el-icon-arrow-right"})])],1)]),e._v(" "),0===e.resourceInfoList.length?s("el-empty",{staticStyle:{margin:"20% auto"},attrs:{description:""+e.$t("focusDetail.description")}}):s("div",[s("div",{staticClass:"blog-post"},[s("div",{staticClass:"bg-img",staticStyle:{"margin-top":"-200px"}},[s("img",{attrs:{src:"static/img/blog-post-bg.png",alt:""}})]),e._v(" "),s("div",{staticClass:"container"},[s("div",{staticClass:"row"},e._l(e.resourceInfoList,function(t,a){return s("div",{key:a,staticClass:"col-xl-6 col-lg-6 col-md-6",staticStyle:{"margin-top":"20px"}},[s("div",{staticClass:"single-blog"},[s("div",{staticClass:"part-text"},[s("div",{staticClass:"user-img"},[t.userInfo.headIcon?s("img",{attrs:{src:t.userInfo.headIcon,alt:""}}):s("img",{attrs:{src:"static/ico/none.png",alt:""}})]),e._v(" "),s("h3",[s("a",{on:{click:function(s){return e.goResourceDetail(t.resource.id)}}},[e._v(e._s(t.resource.origin_name))])]),e._v(" "),s("h4",[s("span",[s("i",{staticClass:"el-icon-s-custom"}),e._v("   "+e._s(t.userInfo.username)+" ")])]),e._v(" "),s("h4",[s("span",[e._v(e._s(e.$t("focusDetail.belongTo"))+e._s(t.resource.discipline))])]),e._v(" "),s("h4",[s("span",[e._v(e._s(e.$t("focusDetail.uploadDate"))+e._s(t.resource.upload_time))])]),e._v(" "),s("div",{staticClass:"div_resource_description"},[e._v("\n                    "+e._s(t.resource.description)+"\n                  ")])]),e._v(" "),s("div",{staticClass:"part-social"},[s("a",{on:{click:function(s){return e.resourceSupportHandler(t.resource.id)}}},[s("span",[s("i",{staticClass:"fas fa-thumbs-up"})]),e._v(" "+e._s(t.resource.supportNumber)+"\n                  ")]),e._v(" "),s("a",{attrs:{href:"#"}},[s("span",[s("i",{staticClass:"fas fa-star"})]),e._v(e._s(t.resource.favorite_number))]),e._v(" "),s("a",{attrs:{href:"#"}},[s("span",[s("i",{staticClass:"fas fa-cloud-download-alt"})]),e._v(e._s(t.resource.downloads)+"次")]),e._v(" "),s("a",{attrs:{href:e.backendBaseURL+"/resource/download/"+t.resource.disk_name+"/"+t.resource.id+"/"+t.resource.discipline}},[s("span",[s("i",{staticClass:"fas fa-download"})]),e._v(e._s(e.$t("download")))]),e._v(" "),s("a",{on:{click:function(s){return e.goResourceDetail(t.resource.id)}}},[e._v(" More")])])])])}),0)])]),e._v(" "),s("div",{attrs:{align:"center"}},[s("el-pagination",{attrs:{background:"","page-size":e.resourcePageData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.resourcePageData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),s("br")])],1)],1)},staticRenderFns:[]};var c=s("VU/8")(i,o,!1,function(e){s("BSC1")},"data-v-7eb50589",null).exports,n=s("dPkO"),u={name:"FocusPage",components:{Header:r.a,Footer:a.a,PageTitle:n.a,FocusDetail:c}},l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("Header"),this._v(" "),t("PageTitle"),this._v(" "),t("FocusDetail"),this._v(" "),t("Footer")],1)},staticRenderFns:[]};var d=s("VU/8")(u,l,!1,function(e){s("EY3A")},"data-v-5837693e",null);t.default=d.exports}});
//# sourceMappingURL=5.53f63ce17cf4db133e87.js.map